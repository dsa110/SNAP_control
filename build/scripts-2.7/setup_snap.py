from SNAP_control import dsaX_snap
import numpy as np
import sys
import time

#delays = [[229, 229, 440, 439, 0, 0],[178, 178, 196, 196, 149, 149],[497, 1462, 148, 148, 130, 129],[167, 167, 64, 63, 82, 82],[391, 390, 409, 409, 390, 389],[429, 427, 442, 441, 460, 459],[494, 494, 479, 480, 229, 229],[0, 0, 0, 0, 0, 0]]
#delays = [[229, 229, 440, 439, 0, 0],[178, 178, 196, 196, 151, 150],[497, 1462, 155, 155, 133, 133],[175, 175, 68, 68, 87, 87],[389, 388, 406, 406, 388, 387],[429, 429, 443, 442, 457, 456],[490, 489, 475, 476, 0, 0],[0, 0, 0, 0, 0, 0]]
delays = [[663, 663, 645, 645, 0, 0],[613, 613, 632, 632, 586, 585],[12, 977, 585, 585, 566, 566],[607, 607, 504, 503, 522, 522],[822, 822, 840, 840, 821, 821],[859, 858, 873, 871, 891, 890],[924, 924, 910, 911, 0, 0],[0, 0, 0, 0, 0, 0]]
snaps = ['10.41.0.150', 'snap01.sas.pvt', 'snap02.sas.pvt', '10.41.0.147', 'snap04.sas.pvt', 'snap05.sas.pvt', 'snap06.sas.pvt', 'snap07.sas.pvt']

for sn in [int(sys.argv[1])]:

    print(snaps[sn],delays[sn])
    
    d = dsaX_snap.dsaX_snap(snaps[sn],'/home/ubuntu/proj/dsa110-shell/SNAP_control/config/dsa.yaml')
    d.level()
    d.set_delay(delays=delays[sn])
    time.sleep(1)

    
